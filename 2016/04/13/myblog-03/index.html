<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>myblog-03 数据库和用户认证 | Harryx</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Flask-SQLAlchemy管理数据库初始化一个数据库1234567from flask.ext.sqlalchemy import SQLAlchemyapp.config[&amp;quot;SQLALCHEMY_TRACK_MODIFICATIONS&amp;quot;] = Trueapp.config[&amp;apos;SQLALCHEMY_DATABASE_URI&amp;apos;] =&amp;apos;mysql">
<meta name="keywords" content="flask,mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="myblog-03 数据库和用户认证">
<meta property="og:url" content="http://yoursite.com/2016/04/13/myblog-03/index.html">
<meta property="og:site_name" content="Harryx">
<meta property="og:description" content="Flask-SQLAlchemy管理数据库初始化一个数据库1234567from flask.ext.sqlalchemy import SQLAlchemyapp.config[&amp;quot;SQLALCHEMY_TRACK_MODIFICATIONS&amp;quot;] = Trueapp.config[&amp;apos;SQLALCHEMY_DATABASE_URI&amp;apos;] =&amp;apos;mysql">
<meta property="og:updated_time" content="2017-03-15T04:49:42.793Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="myblog-03 数据库和用户认证">
<meta name="twitter:description" content="Flask-SQLAlchemy管理数据库初始化一个数据库1234567from flask.ext.sqlalchemy import SQLAlchemyapp.config[&amp;quot;SQLALCHEMY_TRACK_MODIFICATIONS&amp;quot;] = Trueapp.config[&amp;apos;SQLALCHEMY_DATABASE_URI&amp;apos;] =&amp;apos;mysql">
  
    <link rel="alternate" href="/atom.xml" title="Harryx" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Harryx</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-myblog-03" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/13/myblog-03/" class="article-date">
  <time datetime="2016-04-13T06:07:25.000Z" itemprop="datePublished">2016-04-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      myblog-03 数据库和用户认证
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Flask-SQLAlchemy管理数据库"><a href="#Flask-SQLAlchemy管理数据库" class="headerlink" title="Flask-SQLAlchemy管理数据库"></a>Flask-SQLAlchemy管理数据库</h1><h2 id="初始化一个数据库"><a href="#初始化一个数据库" class="headerlink" title="初始化一个数据库"></a>初始化一个数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">from flask.ext.sqlalchemy import SQLAlchemy</div><div class="line"></div><div class="line">app.config[&quot;SQLALCHEMY_TRACK_MODIFICATIONS&quot;] = True</div><div class="line">app.config[&apos;SQLALCHEMY_DATABASE_URI&apos;] =&apos;mysql://username:password@hostname/database&apos;</div><div class="line">app.config[&apos;SQLALCHEMY_COMMIT_ON_TEARDOWN&apos;] = True</div><div class="line"></div><div class="line">db = SQLAlchemy(app)</div></pre></td></tr></table></figure>
<h2 id="定义模型"><a href="#定义模型" class="headerlink" title="定义模型"></a>定义模型</h2><p>模型表示程序使用的持久化实体，在<strong>ORM</strong>（对象关系映射：Object Relation Mapping）中，模型一般是一个python类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class User(db.Model):</div><div class="line">    __tablename__ = &apos;users&apos;</div><div class="line">    id = db.Column(db.Integer, primary_key=True)</div><div class="line">    name = db.Column(db.String(20), unique=True)</div><div class="line"></div><div class="line">    def __repr__(self):</div><div class="line">        return &apos;&lt;User %r&gt;&apos; % self.name</div></pre></td></tr></table></figure></p>
<p><a href="http://herui.blog-harryx.cn/2016/03/12/flask-mysql/" target="_blank" rel="external">详细指令</a></p>
<h2 id="数据库创建一个表"><a href="#数据库创建一个表" class="headerlink" title="数据库创建一个表"></a>数据库创建一个表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create table users(</div><div class="line">    -&gt; id int(32) primary key auto_increment,</div><div class="line">    -&gt; name char(20) unique);</div></pre></td></tr></table></figure>
<h2 id="插入一个数据"><a href="#插入一个数据" class="headerlink" title="插入一个数据"></a>插入一个数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; insert users</div><div class="line">    -&gt; (id,name)</div><div class="line">    -&gt; values (1,harry);</div></pre></td></tr></table></figure>
<h2 id="集成Python-Shell"><a href="#集成Python-Shell" class="headerlink" title="集成Python Shell"></a>集成Python Shell</h2><p>注册一个<strong>make_shell_context()</strong>回调函数<br>不用每次都从Shell导入模型和实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">from flask.ext.script import Shell</div><div class="line"></div><div class="line">def make_shell_context():</div><div class="line">    return dict(app=app, db=db, User=User)</div><div class="line">manager.add_command(&quot;shell&quot;, Shell(make_context=make_shell_context))</div></pre></td></tr></table></figure></p>
<h2 id="视图函数操作"><a href="#视图函数操作" class="headerlink" title="视图函数操作"></a>视图函数操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">@app.route(&apos;/&apos;, methods=[&apos;GET&apos;, &apos;POST&apos;])</div><div class="line">def index():</div><div class="line">    form = NameForm()</div><div class="line">    if form.validate_on_submit():</div><div class="line">        user = User.query.filter_by(name=form.name.data).first()</div><div class="line">        if user is None:</div><div class="line">            flash(&quot;I think you are new here~&quot;)</div><div class="line">            user = User(name = form.name.data)</div><div class="line">            db.session.add(user)</div><div class="line">        session[&apos;name&apos;] = form.name.data</div><div class="line">        form.name.data = &apos;&apos;</div><div class="line">        return redirect(url_for(&apos;index&apos;))</div><div class="line">    return render_template(&apos;index.html&apos;, form=form, name=session.get(&apos;name&apos;))</div></pre></td></tr></table></figure>
<h2 id="创建迁移仓库"><a href="#创建迁移仓库" class="headerlink" title="创建迁移仓库"></a>创建迁移仓库</h2><h3 id="配置Flask-Migrate"><a href="#配置Flask-Migrate" class="headerlink" title="配置Flask-Migrate"></a>配置Flask-Migrate</h3><p>Flask-Migrate提供了一个MigrateCommand类，可以附加到Flask-Script的manager对象上<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">from flask.ext.migrate import Migrate, MigrateCommand</div><div class="line"></div><div class="line"># ...</div><div class="line"></div><div class="line">migrate = Migrate(app, db)</div><div class="line">manager.add_command(&apos;db&apos;, MigrateCommand)</div></pre></td></tr></table></figure></p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>如果已经初始化过，需要删除之前的版本，并且要删除之前创建migrations文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql &gt; DROP TABLE alembic_version;</div></pre></td></tr></table></figure></p>
<p>初始化会创建migrations文件，所有迁移脚本都存放其中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(venv)$ python blog.py db init</div><div class="line">  Creating directory /home/herui/myblog/migrations ... done</div><div class="line">  Creating directory /home/herui/myblog/migrations/versions ... done</div><div class="line">  Generating /home/herui/myblog/migrations/alembic.ini ... done</div><div class="line">  Generating /home/herui/myblog/migrations/env.pyc ... done</div><div class="line">  Generating /home/herui/myblog/migrations/script.py.mako ... done</div><div class="line">  Generating /home/herui/myblog/migrations/env.py ... done</div><div class="line">  Generating /home/herui/myblog/migrations/README ... done</div><div class="line">  Please edit configuration/connection/logging settings in</div><div class="line">  &apos;/home/herui/myblog/migrations/alembic.ini&apos; before proceeding.</div></pre></td></tr></table></figure></p>
<h3 id="创建迁移脚本"><a href="#创建迁移脚本" class="headerlink" title="创建迁移脚本"></a>创建迁移脚本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(venv)$ python blog.py db migrate -m &quot;initial migration&quot;</div><div class="line">INFO  [alembic.runtime.migration] Context impl MySQLImpl.</div><div class="line">INFO  [alembic.runtime.migration] Will assume non-transactional DDL.</div><div class="line">INFO  [alembic.env] No changes in schema detected.</div></pre></td></tr></table></figure>
<h3 id="更新数据库"><a href="#更新数据库" class="headerlink" title="更新数据库"></a>更新数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(venv)$ python blog.py db upgrade</div><div class="line">INFO  [alembic.runtime.migration] Context impl MySQLImpl.</div><div class="line">INFO  [alembic.runtime.migration] Will assume non-transactional DDL.</div></pre></td></tr></table></figure>
<h1 id="用户认证"><a href="#用户认证" class="headerlink" title="用户认证"></a>用户认证</h1><h2 id="密码散列值"><a href="#密码散列值" class="headerlink" title="密码散列值"></a>密码散列值</h2><p>使用Werkzeug实现密码散列</p>
<ul>
<li><strong>generate_password_hash(password, method= pbkdf2:sha1 , salt_length=8)</strong>：<br>这个函数将原始密码作为输入，以字符串形式输出密码散列值，method，salt_length默认值能满足大部分需求</li>
<li><strong>check_password_hash(hash, password)</strong>：<br>这个函数参数是从数据库读回的密码散列值和用户输入的密码，返回值为True表示密码正确</li>
</ul>
<p>生成散列值后不能还原成原来的密码<br>在User模型中加入密码散列<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">from werkzeug.security import generate_password_hash, check_password_hash</div><div class="line"></div><div class="line">@property</div><div class="line">def password(self):</div><div class="line">    raise AttributeError(&apos;password is not a readable attribute&apos;)</div><div class="line"></div><div class="line">@password.setter</div><div class="line">def password(self, password):</div><div class="line">    self.password_hash = generate_password_hash(password)</div><div class="line"></div><div class="line">def verify_password(self, password):</div><div class="line">    return check_password_hash(self.password_hash, password)</div></pre></td></tr></table></figure></p>
<h2 id="创建认证蓝本"><a href="#创建认证蓝本" class="headerlink" title="创建认证蓝本"></a>创建认证蓝本</h2><p>对于不同的程序功能使用不同的蓝本<br>文件：<strong>app/auth/<strong>init</strong>.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">from flask import Blueprint</div><div class="line"></div><div class="line">auth = Blueprint(&apos;auth&apos;, __name__)</div><div class="line"></div><div class="line">from . import views</div></pre></td></tr></table></figure></p>
<p>添加路由和视图函数<br>文件：<strong>app/auth/views.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">from flask import render_template</div><div class="line"></div><div class="line">from . import auth</div><div class="line"></div><div class="line">@auth.route(&apos;/login&apos;)</div><div class="line">def login():</div><div class="line">    return render_template(&apos;auth/login.html&apos;)</div></pre></td></tr></table></figure></p>
<p>文件：<strong>app/auth/login.html</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;% extends &quot;base.html&quot; %&#125;</div><div class="line"></div><div class="line">&#123;% block title %&#125;login&#123;% endblock %&#125;</div><div class="line"></div><div class="line">&#123;% block page_content %&#125;</div><div class="line">&lt;div class=&quot;page-header&quot;&gt;</div><div class="line">    &lt;h1&gt;Login&lt;/h1&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&#123;% endblock %&#125;</div></pre></td></tr></table></figure></p>
<p>在<strong>create_app()</strong>工厂函数中附加auth蓝本<br>url_prefix是可选参数，如果使用了这个参数，注册后蓝本中定义的所有路由都会加上前缀，这个例子为即/auth<br>文件：<strong>app/<strong>init</strong>.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">def create_app(config_name):</div><div class="line"></div><div class="line">    #...</div><div class="line"></div><div class="line">    from .auth import auth as auth_blueprint</div><div class="line">    app.register_blueprint(auth_blueprint, url_prefix=&apos;/auth&apos;)</div><div class="line"></div><div class="line">    return app</div></pre></td></tr></table></figure></p>
<h2 id="使用Flask-Login认证用户"><a href="#使用Flask-Login认证用户" class="headerlink" title="使用Flask-Login认证用户"></a>使用Flask-Login认证用户</h2><h3 id="准备用于登录的用户模型"><a href="#准备用于登录的用户模型" class="headerlink" title="准备用于登录的用户模型"></a>准备用于登录的用户模型</h3><p>Flask-Login提供了一个UserMixin类，包含一些方法的默认实现<br>文件：app/models.py<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">from flask.ext.login import UserMixin</div><div class="line"></div><div class="line">class User(UserMixin, db.Model):</div><div class="line">    __tablename__ = &apos;users&apos;</div><div class="line">    id = db.Column(db.Integer, primary_key = True)</div><div class="line">    email = db.Column(db.String(64), unique=True, index=True)</div><div class="line">    name = db.Column(db.String(64), unique=True, index=True)</div><div class="line">    password_hash = db.Column(db.String(128))</div></pre></td></tr></table></figure></p>
<h3 id="Flask-Login在工厂函数中初始化"><a href="#Flask-Login在工厂函数中初始化" class="headerlink" title="Flask-Login在工厂函数中初始化"></a>Flask-Login在工厂函数中初始化</h3><p>login_manager对象的session_protection可以设置为None、’basic’、’strong’，以提供不同的安全等级防止用户会话遭篡改<br>Flask-Login会记录客户端IP地址和浏览器的用户代理信息，如果发现异动就登出用户<br>login_view属性设置登录页面的端点，登录路由在蓝本中定义，要在前面加上蓝本名字(auth)<br>文件：<strong>app/<strong>init</strong>.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">from flask.ext.login import LoginManager</div><div class="line"></div><div class="line">login_manager = LoginManager()</div><div class="line">login_manager.session_protection = &apos;strong&apos;</div><div class="line">login_manager.login_view = &apos;auth.login&apos;</div><div class="line"></div><div class="line">def create_app(config_name):</div><div class="line">    # ...</div><div class="line">    login_manager.init_app(app)</div><div class="line">    # ...</div></pre></td></tr></table></figure></p>
<p>回调函数，使用指定标识符加载用户，返回用户对象或者None<br>文件：<strong>app/models.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">from . import login_manager</div><div class="line"></div><div class="line">@login_manager.user_loader</div><div class="line">def load_user(user_id):</div><div class="line">    return User.query.get(int(user_id))</div></pre></td></tr></table></figure></p>
<h3 id="保护路由"><a href="#保护路由" class="headerlink" title="保护路由"></a>保护路由</h3><p>为了保护路由只让认证用户访问，Flask-Login提供了一个login_require修饰器<br>如果没有认证的用户访问这个路由，会拦截请求，把用户发往登录页面<br>用法如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">from flask.ext.login import login_required</div><div class="line"></div><div class="line">@app.route(&apos;/secret&apos;)</div><div class="line">@login_required</div><div class="line">def secret():</div><div class="line">    return &apos;Only authenticated users are allowed!&apos;</div></pre></td></tr></table></figure></p>
<h3 id="添加登录表单"><a href="#添加登录表单" class="headerlink" title="添加登录表单"></a>添加登录表单</h3><p>包含输入邮件、密码、记住无复选框和提交按钮<br>文件：<strong>app/auth/forms.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">from flask.ext.wtf import Form</div><div class="line">from wtforms import StringField, PasswordField, BooleanField, SubmitField</div><div class="line">from wtforms.validators import Required, Length, Email</div><div class="line"></div><div class="line">class LoginForm(Form):</div><div class="line">    email = StringField(&apos;Email&apos;, validators=[Required(), Length(1, 64),Email()])</div><div class="line">    password = PasswordField(&apos;Password&apos;, validators=[Required()])</div><div class="line">    remember_me = BooleanField(&apos;Keep me logged in&apos;)</div><div class="line">    submit = SubmitField(&apos;Log In&apos;)</div></pre></td></tr></table></figure></p>
<h3 id="登录页面：auth-login-html"><a href="#登录页面：auth-login-html" class="headerlink" title="登录页面：auth/login.html"></a>登录页面：auth/login.html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;% extends &quot;base.html&quot; %&#125;</div><div class="line">&#123;% import &quot;bootstrap/wtf.html&quot; as wtf %&#125;</div><div class="line"></div><div class="line">&#123;% block title %&#125;Login&#123;% endblock %&#125;</div><div class="line"></div><div class="line">&#123;% block page_content %&#125;</div><div class="line">&lt;div class=&quot;page-header&quot;&gt;</div><div class="line">    &lt;h1&gt;Login&lt;/h1&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div class=&quot;col-md-4&quot;&gt;</div><div class="line">    &#123;&#123; wtf.quick_form(form) &#125;&#125;</div><div class="line">&lt;/div&gt;</div><div class="line">&#123;% endblock %&#125;</div></pre></td></tr></table></figure>
<h3 id="在导航条中添加Sign-In和Sign-Out链接"><a href="#在导航条中添加Sign-In和Sign-Out链接" class="headerlink" title="在导航条中添加Sign In和Sign Out链接"></a>在导航条中添加Sign In和Sign Out链接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;ul class=&quot;nav navbar-nav navbar-right&quot;&gt;</div><div class="line">&#123; % if current_user.is_authenticated() % &#125;</div><div class="line">&lt;li&gt;&lt;a href=&quot;&#123;&#123; url_for(&apos;auth.logout&apos;) &#125;&#125;&quot;&gt;Sign Out&lt;/a&gt;&lt;/li&gt;</div><div class="line">&#123; % else % &#125;</div><div class="line">&lt;li&gt;&lt;a href=&quot;&#123;&#123; url_for(&apos;auth.login&apos;) &#125;&#125;&quot;&gt;Sign In&lt;/a&gt;&lt;/li&gt;</div><div class="line">&#123; % endif % &#125;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
<h3 id="登入用户"><a href="#登入用户" class="headerlink" title="登入用户"></a>登入用户</h3><p>文件：<strong>app/auth/views.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">from flask import render_template, redirect, request, url_for, flash</div><div class="line">from flask.ext.login import login_user, logout_user</div><div class="line"></div><div class="line">from . import auth</div><div class="line">from ..models import User</div><div class="line">from .forms import LoginForm</div><div class="line"></div><div class="line">@auth.route(&apos;/login&apos;, methods=[&apos;GET&apos;, &apos;POST&apos;])</div><div class="line">def login():</div><div class="line">    #创建一个**LoginForm()**对象</div><div class="line">    form = LoginForm()</div><div class="line">    if form.validate_on_submit():</div><div class="line">        #如果电子邮件对应的用户存在</div><div class="line">        user = User.query.filter_by(email=form.email.data).first()</div><div class="line"></div><div class="line">        调用用户对象的verify_password()方法，检测输入的密码</div><div class="line">        if user is not None and user.verify_password(form.password.data):</div><div class="line">            #调用Flask-Login的login_user函数，把用户标记为已登录，第二个参数为“记住我”</div><div class="line">            login_user(user, form.remember_me.data)</div><div class="line">            return redirect(request.args.get(&apos;next&apos;) or url_for(&apos;main.index&apos;))</div><div class="line">        flash(&apos;Invalid username or password.&apos;)</div><div class="line"></div><div class="line">    #请求类型为GET时直接显示表单</div><div class="line">    return render_template(&apos;auth/login.html&apos;, form=form)</div></pre></td></tr></table></figure></p>
<h3 id="登出用户"><a href="#登出用户" class="headerlink" title="登出用户"></a>登出用户</h3><p>文件：<strong>app/auth/views.py</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">from flask.ext.login import logout_user, login_required</div><div class="line"></div><div class="line">@auth.route(&apos;/logout&apos;)</div><div class="line">@login_required</div><div class="line">def logout():</div><div class="line">    #调用Flask-Login中的logout_user()函数</div><div class="line">    logout_user()</div><div class="line">    flash(&apos;You have been logged out.&apos;)</div><div class="line">    return redirect(url_for(&apos;main.index&apos;))</div></pre></td></tr></table></figure></p>
<h3 id="测试登录"><a href="#测试登录" class="headerlink" title="测试登录"></a>测试登录</h3><p>在Shell界面注册用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(venv)$ python manage.py shell</div><div class="line">&gt;&gt;&gt; u = User(id=1,name=&quot;harry&quot;,email=&quot;harryx520@qq.com&quot;,password=&quot;lalala&quot;)</div><div class="line">&gt;&gt;&gt; db.session.add(u)</div><div class="line">&gt;&gt;&gt; db.session.commit()</div></pre></td></tr></table></figure></p>
<p>查看数据库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select * from users;</div><div class="line"></div><div class="line">|  1 | harryx520@qq.com | harry | pbkdf2:sha1:1(...)ffba4781 |</div></pre></td></tr></table></figure></p>
<h1 id="数据库常用操作"><a href="#数据库常用操作" class="headerlink" title="数据库常用操作"></a>数据库常用操作</h1><h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p>创建普通有一个约束的表</p>
<p><code>person_id</code>作为主键约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create table person</div><div class="line">    -&gt; (person_id int(5) unsigned,</div><div class="line">    -&gt; name char(64),</div><div class="line">    -&gt; gender enum(&apos;M&apos;,&apos;F&apos;),</div><div class="line">    -&gt; state char(64),</div><div class="line">    -&gt; constraint pk_person primary key (person_id))default charset=utf8;</div></pre></td></tr></table></figure>
<p>创建具有外键约束的表</p>
<p><code>person_id</code>和<code>food</code>同时作为主键约束，<code>person_id</code>作为外键约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create table fav_food</div><div class="line">    -&gt; (person_id int(5) unsigned,</div><div class="line">    -&gt; food char(64),</div><div class="line">    -&gt; constraint pk_fav_food primary key (person_id, food),</div><div class="line">    -&gt; constraint fk_fav_food_person_id foreign key (person_id)</div><div class="line">    -&gt;      references person (person_id))default charset=utf8;</div></pre></td></tr></table></figure>
<h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><p>alter table用于修改已经存在的表定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table person modify person_id int(5) unsigned auto_increment;</div></pre></td></tr></table></figure>
<h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><p>insert语句由三个部分构成：表的名称、列的名称、值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; insert into person</div><div class="line">    -&gt; (name, gender, state)</div><div class="line">    -&gt; values (&quot;harryx&quot;, &quot;M&quot;, &quot;中国&quot;);</div></pre></td></tr></table></figure>
<h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><p>可以指定列、指定顺序、设置条件</p>
<p>可以添加如下：</p>
<ul>
<li>字符，比如数字和字符串</li>
<li>表达式</li>
<li>调用内建函数</li>
<li>自定义函数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select person_id,name,gender from person where state=&quot;中国&quot;;</div><div class="line"></div><div class="line">mysql&gt; select * from person order by name;</div><div class="line"></div><div class="line">mysql&gt; select name,&quot;is&quot;,gender from person;</div><div class="line"></div><div class="line">mysql&gt; select version(),user(),database();</div></pre></td></tr></table></figure>
<h3 id="使用别名"><a href="#使用别名" class="headerlink" title="使用别名"></a>使用别名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select name as n,gender as g from person;</div></pre></td></tr></table></figure>
<h3 id="去除重复"><a href="#去除重复" class="headerlink" title="去除重复"></a>去除重复</h3><p>注意，需要先排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select distinct person_id from fav_food;</div></pre></td></tr></table></figure>
<p>查询的表可以是临时表和虚拟表</p>
<p>在子表查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select e.name,e.state from (select * from person) as e;</div></pre></td></tr></table></figure>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>试图并不存储数据，只提供查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create view person_vw as</div><div class="line">    -&gt; select name from person;</div></pre></td></tr></table></figure>
<h3 id="表连接"><a href="#表连接" class="headerlink" title="表连接"></a>表连接</h3><p>内连接（不用inner关键字的话也是默认内连接）<br>不提供<code>on</code>关键字的话是笛卡尔积</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select p.name,f.food</div><div class="line">    -&gt; from person as p inner join fav_food as f</div><div class="line">    -&gt; on p.person_id = f.person_id;</div></pre></td></tr></table></figure>
<p>如果如果连接的表关键字是相同的可以使用<code>using</code>代替<code>on</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select p.name,p.state,f.food</div><div class="line">    -&gt; from person as p inner join fav_food as f</div><div class="line">    -&gt; using (person_id);</div></pre></td></tr></table></figure>
<p>连接多个表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select p.name,f.food,a.about</div><div class="line">    -&gt; from person as p inner join fav_food as f</div><div class="line">    -&gt; using(person_id)</div><div class="line">    -&gt; inner join about_me as a</div><div class="line">    -&gt; using(person_id);</div></pre></td></tr></table></figure>
<h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><p>group by 根据某一列的值分组</p>
<p>having 对数据进行过滤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select p.name,count(f.food) </div><div class="line">    -&gt; from person as p inner join fav_food as f </div><div class="line">    -&gt; on p.person_id = f.person_id </div><div class="line">    -&gt; group by p.name;</div><div class="line">    -&gt; having p.name != &quot;harry&quot;;</div></pre></td></tr></table></figure>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>order by 用于对结果的列数据或者根据表达式结果排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//根据state排序</div><div class="line">mysql&gt; select * from person order by state;</div><div class="line"></div><div class="line">//根据state 和 name 排序</div><div class="line">mysql&gt; select * from person order by state,name;</div></pre></td></tr></table></figure>
<p>加上desc降序排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//降序排序</div><div class="line">mysql&gt; select * from person order by person_id desc;</div></pre></td></tr></table></figure>
<p>limit 限制显示行数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//person_id最大的显示前三行</div><div class="line">mysql&gt; select * from person order by person_id desc limit 3;</div></pre></td></tr></table></figure>
<h3 id="使用集合"><a href="#使用集合" class="headerlink" title="使用集合"></a>使用集合</h3><p>union 连接数据，排除重复项<br>union all 连接数据，保留重复项</p>
<p>intersect 交集，MySQL不支持</p>
<p>except 差集，MySQL不支持</p>
<h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><p>更新语句可以更新一行或者匹配到的多行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; update person</div><div class="line">    -&gt; set state=&quot;美国&quot;</div><div class="line">    -&gt; where person_id=4;</div></pre></td></tr></table></figure>
<p>级联更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table fav_food</div><div class="line">    -&gt; add constraint fk_food_peron foreign key (person_id)</div><div class="line">    -&gt; references person(person_id)</div><div class="line">    -&gt; on update cascade;</div></pre></td></tr></table></figure>
<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><p>如果被删除的列设置了外键，需要在子表添加外键时申明级联删除<br>在申明级联删除前先删除外键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table fav_food </div><div class="line">    -&gt; add constraint fk_person_id foreign key (person_id) </div><div class="line">    -&gt; references person (person_id) on delete cascade;</div><div class="line"></div><div class="line">mysql&gt; delete from person where name=&quot;o&quot;;</div></pre></td></tr></table></figure>
<h2 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h2><p>可以获取XML格式的数据，需要制定xml格式进入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -u flask -p --xml flaskdb</div></pre></td></tr></table></figure>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>关闭自动提交</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; set autocommit=0;</div></pre></td></tr></table></figure>
<p>关闭自动提交后，所有的SQL命令都在一个事务内<br>显式使用<code>rollback</code>回滚数据<br>显式使用<code>commit</code>提交数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; delete from person where person_id=4;</div><div class="line">mysql&gt; rollback;</div></pre></td></tr></table></figure>
<p>设置保存点</p>
<p>保存点拥有名字，可以拥有多个保存点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; delete from fav_food where food=&quot;ice&quot;;</div><div class="line">mysql&gt; savepoint point_1;</div><div class="line">mysql&gt; delete from fav_food where food=&quot;apple&quot;;</div><div class="line">mysql&gt; savepoint point_2;</div><div class="line">mysql&gt; rollback to savepoint point_1;</div></pre></td></tr></table></figure>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p>添加索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table person</div><div class="line">    -&gt; add index ind_name (name);</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create index ind_name on person(name);</div></pre></td></tr></table></figure>
<p>查询索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; show index from person \G</div></pre></td></tr></table></figure>
<p>删除某个索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; alter table person</div><div class="line">    -&gt; drop index ind_name;</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; drop index ind_name on person;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/13/myblog-03/" data-id="cj5c7k3a90024m0u43u0a806g" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flask/">flask</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/04/14/myblog-04/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          myblog-04 用户注册
        
      </div>
    </a>
  
  
    <a href="/2016/04/12/myblog-02/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">myblog-02 表单</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acg/">acg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/basic/">basic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bb/">bb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask/">flask</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haskell/">haskell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sicp/">sicp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/soket/">soket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spider/">spider</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C#</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/acg/" style="font-size: 10px;">acg</a> <a href="/tags/basic/" style="font-size: 10px;">basic</a> <a href="/tags/bb/" style="font-size: 10px;">bb</a> <a href="/tags/c/" style="font-size: 12.86px;">c++</a> <a href="/tags/django/" style="font-size: 12.86px;">django</a> <a href="/tags/flask/" style="font-size: 20px;">flask</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/haskell/" style="font-size: 10px;">haskell</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/javascript/" style="font-size: 17.14px;">javascript</a> <a href="/tags/jquery/" style="font-size: 15.71px;">jquery</a> <a href="/tags/linux/" style="font-size: 11.43px;">linux</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mysql/" style="font-size: 12.86px;">mysql</a> <a href="/tags/python/" style="font-size: 18.57px;">python</a> <a href="/tags/sicp/" style="font-size: 10px;">sicp</a> <a href="/tags/socket/" style="font-size: 11.43px;">socket</a> <a href="/tags/soket/" style="font-size: 10px;">soket</a> <a href="/tags/spider/" style="font-size: 14.29px;">spider</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/03/effective-C/">effective_C++</a>
          </li>
        
          <li>
            <a href="/2017/04/01/traceback/">异常处理</a>
          </li>
        
          <li>
            <a href="/2017/04/01/logging/">打印日志</a>
          </li>
        
          <li>
            <a href="/2017/04/01/construct/">二进制数据处理</a>
          </li>
        
          <li>
            <a href="/2017/03/29/Csharp/">C#面向对象</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 HeRui<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>