<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Ben Wong,wenbinben@gmail.com"><title>服务器架设学习笔记二 · Harryx</title><meta name="description" content="网络设备
主机硬件：考虑使用年限、省电、虚拟技术等
Linux操作系统：考虑稳定性
网卡：考虑服务器用途、驱动程序
Switch/Hub：考虑主机数量、带宽、网管功能
网线：考虑速度相配的等级、线缆形状、配线等
无线网络设备：考虑速度、标准、安全性

网卡
网卡名称：网卡(Network Inter"><meta name="keywords" content="Hexo,HTML,Ben,CSS,安卓,android,Linux,linuxdeepin"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Harryx</a></h3><div class="description"><p>good good study good good play~</p></div></div></div><ul class="social-links"><li><a href="https://twitter.com/harryx520"><i class="fa fa-twitter"></i></a></li><li><a href="http://weibo.com/Booooyakasha"><i class="fa fa-weibo"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="http://7xrooc.com1.z0.glb.clouddn.com/avatar.jpg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>服务器架设学习笔记二</a></h3></div><div class="post-content"><h1 id="网络设备"><a href="#网络设备" class="headerlink" title="网络设备"></a>网络设备</h1><ul>
<li><strong>主机硬件</strong>：考虑使用年限、省电、虚拟技术等</li>
<li><strong>Linux操作系统</strong>：考虑稳定性</li>
<li><strong>网卡</strong>：考虑服务器用途、驱动程序</li>
<li><strong>Switch/Hub</strong>：考虑主机数量、带宽、网管功能</li>
<li><strong>网线</strong>：考虑速度相配的等级、线缆形状、配线等</li>
<li><strong>无线网络设备</strong>：考虑速度、标准、安全性</li>
</ul>
<h1 id="网卡"><a href="#网卡" class="headerlink" title="网卡"></a>网卡</h1><ul>
<li>网卡名称：<strong>网卡</strong>(Network Interface Card，NIC)名称以网卡内核模块对应设备名称表示，默认网卡名为<strong>eth0</strong></li>
<li><p>linux网络参数配置文件：</p>
<ul>
<li><p><strong>ubuntu</strong>配置文件：</p>
<ul>
<li><strong>IP地址</strong>配置文件：<strong>/etc/network/interfaces</strong>，设置DHCP(动态主机配置协议)或者手动设置静态IP</li>
<li><p>以DHCP方式配置网卡：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">auto eth0</div><div class="line">iface eth0 inet dhcp</div></pre></td></tr></table></figure>
</li>
<li><p>为网卡配置静态IP：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">auto eth0</div><div class="line">iface eth0 inet static</div><div class="line">address 192.168.0.100</div><div class="line">gateway 192.168.0.1</div><div class="line">netmask 255.255.255.0</div></pre></td></tr></table></figure>
</li>
<li><p><strong>/etc/init.d/networking restart</strong>，重启以生效</p>
</li>
<li><strong>/bin/hostname newname</strong>，设置主机名称</li>
</ul>
</li>
<li><p><strong>CentOS</strong>配置文件：<br><a href="http://www.cnblogs.com/vicowong/archive/2011/04/23/2025545.html" target="_blank" rel="external">http://www.cnblogs.com/vicowong/archive/2011/04/23/2025545.html</a></p>
</li>
</ul>
</li>
<li><p><strong>无线网络</strong>(Wireless Local Area Network，<strong>WLAN</strong>)：使用无线电波作为传输媒介，IEEE802.11/a/g/b/n/ac标准</p>
</li>
<li><strong>WIFI</strong>(Wireless Fidelity，无线保真)：WIFI是WLAN的一个标准</li>
<li><strong>无线接入点</strong>(Wireless Acess Point，简称<strong>AP</strong>)：就是俗称的无线路由器<h1 id="linux常用网络命令"><a href="#linux常用网络命令" class="headerlink" title="linux常用网络命令"></a>linux常用网络命令</h1></li>
<li><strong>ifconfig</strong>：查询、设置网卡的IP等相关参数</li>
<li><strong>ifup</strong>，<strong>ifdown</strong>：两个script文件，启动、关闭网络接口</li>
<li><strong>route</strong>：查看、配置路由表(route table)ping</li>
<li><strong>ip</strong>：整合式命令，可以直接修改上述提到的功能</li>
<li><strong>ping</strong>：通过ICMP检查网络状态</li>
<li><p><strong>netstat</strong>：查看网络连接和后门</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">-r：列出路由表，如同route</div><div class="line">-n：不使用主机名和服务名称，使用IP与port number，如同route -n</div><div class="line">-a：列出所有连接状态，包括tcp/udp/unix socket等</div><div class="line">-t：仅列出tcp数据包连接</div><div class="line">-u：仅列出udp数据包连接</div><div class="line">-l：仅列出已在监听(Listen)的服务的网络状态</div><div class="line">-p：列出PID与Programe的文件名</div><div class="line">-c：设置几秒后自动更新一次</div><div class="line"></div><div class="line">herui@herui-Compaq-511:~$ sudo netstat -tulnp</div><div class="line">显示已启动的网络服务</div></pre></td></tr></table></figure>
</li>
<li><p><strong>host</strong>：查询某个主机ip，(更详细的可以使用<strong>dig</strong>)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-a：列出详细设置数据</div><div class="line"></div><div class="line">herui@herui-Compaq-511:~$ host www.baidu.com</div><div class="line">www.baidu.com is an alias for www.a.shifen.com.</div><div class="line">www.a.shifen.com has address 119.75.218.70</div><div class="line">www.a.shifen.com has address 119.75.217.109</div></pre></td></tr></table></figure>
</li>
<li><p><strong>nslookup</strong>：和host类似，不过还可以由dIP找出主机名</p>
</li>
<li><strong>nm-tool</strong>：查询详细网络参数，包括DNS</li>
<li><strong>wget</strong>：文字接口下载器</li>
<li><strong>tcpdump</strong>：文字接口数据包捕获器<h1 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h1></li>
<li><p><strong>防火墙</strong></p>
<ul>
<li>第一层防火墙：数据包过滤防火墙(Net Filter)，iptables这个软件提供的防火墙功能，针对TCP/IP数据包头部进行过滤</li>
<li>第二层防火墙：TCP Wrappers，网络数据包接收Super Daemons以及TCP Wrappers的检验</li>
</ul>
</li>
<li><p><strong>SELinux</strong>(Security Enhanced Linux，安全强化Linux)<br>针对网络服务的权限设置一些规则，让程序拥有的功能有限</p>
<ul>
<li><strong>主体</strong>(Subject)<br>SELinux主要管理的就是程序，主体就是程序(Process)</li>
<li><strong>目标</strong>(Object)<br>主题程序访问的目标资源一般是文件系统</li>
<li><strong>策略</strong>(Policy)<br>由于程序和文件数量庞大，SELinux会根据服务制定安全性策略，这些策略会有详细的规则(Rule)来指定资源访问与否</li>
<li><p><strong>安全性环境</strong>(Security Context)<br>主体和目标的安全性必须一致<br>查看安全性环境</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -Z</div></pre></td></tr></table></figure>
<p>安全性环境主要用冒号分为三个字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Identify：Role：Type</div><div class="line">身份识别：角色：类型</div></pre></td></tr></table></figure>
</li>
<li><p><strong>身份识别</strong>(Identify)：相当于帐号方面的身份识别</p>
<ul>
<li><strong>root</strong>：表示<strong>root帐号身份</strong></li>
<li><strong>system_u</strong>：表示系统程序方面的识别，通常指<strong>程序</strong></li>
<li><strong>user_u</strong>：代表<strong>一般用户</strong>帐号相关的身份</li>
</ul>
</li>
<li><strong>角色</strong>(Role)：通过角色字段，我们可以知道这个数据是代表程序、文件资源还是用户<ul>
<li><strong>object_r</strong>：代表的是<strong>文件或者目录</strong>等文件资源，是最常见的</li>
<li><strong>system_r</strong>：代表<strong>程序</strong>，不过，<strong>一般用户</strong>也会被指定称为system_r</li>
</ul>
</li>
<li><p><strong>类型</strong>(Type)：在默认(targeted)策略中，身份识别(Identify)、角色(Role)基本上是不重要的，<strong>重要的在于这个类型(Type)字段</strong>，基本上，一个程序能不能读取到文件资源，与类型字段有关，类型字段在文件和程序中的定义不太相同</p>
<ul>
<li>Type：在文件资源中(Object)中称为类型(Type)</li>
<li><p>Domain：在主体程序(Subject)中称为域(Domain)</p>
<p>Domain要与Type搭配才能顺利读取文件资源</p>
</li>
</ul>
<p>Identify | Role | 意义<br>———–|——–|———<br>root | system_r | 代表供root帐号登录时所取得的权限<br>system_u | system_r | 由于是系统帐号，因此是非交互式的系统运行程序<br>user_u | system_r | 一般可登录用户的程序</p>
</li>
</ul>
</li>
</ul>
<h1 id="WWW服务器"><a href="#WWW服务器" class="headerlink" title="WWW服务器"></a>WWW服务器</h1><ul>
<li><strong>ubuntu apache2配置</strong><br>apache 针对服务器环境的配置文件<br><strong>/etc/apache2/apache2.conf</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">ServerRoot  </div><div class="line">#服务器设置的最顶层</div><div class="line">PidFile $&#123;APACHE_PID_FILE&#125;</div><div class="line">#放置pid的文件</div><div class="line">Timeout 300</div><div class="line">#当持续连接等待300秒后该次连接中断</div><div class="line">KeepAlive On</div><div class="line">是否允许持续性连接，持续性连接就是一次TCP连接可以具有多个文件资料传送要求</div><div class="line">MaxKeepAliveRequests 100</div><div class="line">#当KeepAlive设置为On时，这个数值决定该次连接能够传输的最大传输数量</div><div class="line">KeepAliveTimeout 5</div><div class="line">#允许KeepAlive前提下，该次连接在最后一次传输后等待的秒数</div></pre></td></tr></table></figure>
</li>
</ul>
<p>VH(虚拟主机)的设置<br><strong>/etc/apache2/sites-available/</strong><br>设置完之后导入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#sudo a2dissite example.com.conf</div><div class="line">sudo a2ensite example.com.conf</div><div class="line">sudo service apache2 restart</div></pre></td></tr></table></figure></p>
<p>针对模块功能的配置<br><strong>/etc/apache2/mods-available/mpm_prefork.conf</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;IfModule mpm_prefork_module&gt;</div><div class="line">        StartServers                     2</div><div class="line">        #启动Apache时启动process的数量</div><div class="line">        MinSpareServers           6</div><div class="line">        MaxSpareServers          12</div><div class="line">        #代表最大与最小备用程序数量</div><div class="line">        MaxRequestWorkers         30</div><div class="line">        #每个程序能够提供的最大传输次数要求</div><div class="line">        MaxConnectionsPerChild   3000</div><div class="line">&lt;/IfModule&gt;</div></pre></td></tr></table></figure></p>
<p>参考<br><a href="https://segmentfault.com/a/1190000002517469" target="_blank" rel="external">https://segmentfault.com/a/1190000002517469</a><br><a href="https://www.linode.com/docs/websites/apache/apache-web-server-on-ubuntu-14-04" target="_blank" rel="external">https://www.linode.com/docs/websites/apache/apache-web-server-on-ubuntu-14-04</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-the-apache-web-server-on-an-ubuntu-or-debian-vps" target="_blank" rel="external">https://www.digitalocean.com/community/tutorials/how-to-configure-the-apache-web-server-on-an-ubuntu-or-debian-vps</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-04-08</span><i class="fa fa-tag"></i><a href="/tags/linux/" title="linux" class="tag">linux </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://yoursite.com/2016/04/08/service2/,Harryx,服务器架设学习笔记二,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2016/04/10/myblog-01/" title="myblog-01 开始" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2016/04/05/service1/" title="服务器架设学习笔记一" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>