<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Ben Wong,wenbinben@gmail.com"><title>javascript-09 动画 · Harryx</title><meta name="description" content="JavaScript实现动画效果动画就是让元素的位置随着时间不断发生变化
位置网页元素在浏览器窗口里的位置是一种表示性的信息，通常由CSS负责设置
123456example&amp;#123;    position: absolute;    top: 50px;    left: 100px;&amp;#12"><meta name="keywords" content="Hexo,HTML,Ben,CSS,安卓,android,Linux,linuxdeepin"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title><a href="/">Harryx</a></h3><div class="description"><p>good good study good good play~</p></div></div></div><ul class="social-links"><li><a href="https://twitter.com/harryx520"><i class="fa fa-twitter"></i></a></li><li><a href="http://weibo.com/Booooyakasha"><i class="fa fa-weibo"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">Sobre</a></li><li><a href="/archives">Arquivo</a></li><li><a href="/links">Links</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/avator.jpg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>javascript-09 动画</a></h3></div><div class="post-content"><h1 id="JavaScript实现动画效果"><a href="#JavaScript实现动画效果" class="headerlink" title="JavaScript实现动画效果"></a>JavaScript实现动画效果</h1><p>动画就是让元素的位置随着时间不断发生变化</p>
<h2 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h2><p>网页元素在浏览器窗口里的位置是一种表示性的信息，通常由CSS负责设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">example</span><br><span class="line">&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 50px;</span><br><span class="line">    left: 100px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DOM代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">example.style.position = &quot;absolute&quot;;</span><br><span class="line">example.style.left = &quot;100px&quot;;</span><br><span class="line">example.style.top = &quot;50px&quot;;</span><br></pre></td></tr></table></figure>

<p>posion合法值有static、fixed、relative、和absolute四种</p>
<p>static是默认值，有关元素会按照在标记的先后顺序出现在窗口</p>
<p>relative与static相似，区别是还可以通过float属性从文档的正常显示脱离开</p>
<p>如果某个元素position属性设置为absolute，就可以放到容器的任何位置，容器要么是文档本身，要么是有一个fixed或者absolute属性的父元素，显示位置由top、left、right、bottom等元素决定，可以用百分比或者像素设置这些元素属性值</p>
<p>创建一个标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;cartoon&quot;&gt;</span><br><span class="line">    &lt;p&gt;hello harryx&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>使用JavaScript指定位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">addLoadEvent(</span><br><span class="line">    function positionCartoon()</span><br><span class="line">    &#123;</span><br><span class="line">        var cartoon = document.getElementById(&quot;cartoon&quot;);</span><br><span class="line">        cartoon.style.position = &quot;absolute&quot;;</span><br><span class="line">        cartoon.style.left = &quot;50px&quot;;</span><br><span class="line">        cartoon.style.top = &quot;100px&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>改变元素的位置就是执行函数去改变这个元素的style.top或者style.left等属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function moveCartoon()</span><br><span class="line">&#123;</span><br><span class="line">    var cartoon = document.getElementById(&quot;cartoon&quot;);</span><br><span class="line">    cartoon.style.left = &quot;200px&quot;;</span><br><span class="line">    cartoon.style.top = &quot;50px&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p>JavaScript函数setTimeout能够让某个函数经过一段预定时间后才开始执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(&quot;function&quot;, interval)</span><br></pre></td></tr></table></figure>

<p>第一个参数是一个字符串，是将要执行的函数的名字<br>第二个参数是一个数值，以毫秒为单位设定了需要多长时间后才开始执行第一个参数给出的函数</p>
<p>把函数的调用赋值给一个变量，之后可以使用clearTimeout函数取消等待执行的某个函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">variable = setTimeout(&quot;function&quot;, interval)</span><br><span class="line">clearTimeout(variable)</span><br></pre></td></tr></table></figure>

<p>修改一下positionCartoon函数，让它隔一段时间后执行moveCartoon函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">addLoadEvent(</span><br><span class="line">    function positionCartoon()</span><br><span class="line">    &#123;</span><br><span class="line">        var cartoon = document.getElementById(&quot;cartoon&quot;);</span><br><span class="line">        cartoon.style.position = &quot;absolute&quot;;</span><br><span class="line">        cartoon.style.left = &quot;50px&quot;;</span><br><span class="line">        cartoon.style.top = &quot;100px&quot;;</span><br><span class="line">        movement = setTimeout(&quot;moveCartoon()&quot;, 1000);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>让元素渐变移动，主要逻辑如下</p>
<ol>
<li>获得元素的当前位置</li>
<li>如果元素已经到达目的地，退出这个函数</li>
<li>如果尚未到达目的地，则把它向目的地移近一点</li>
<li>经过一段时间后重复步骤1</li>
</ol>
<p>注意，在获得当前位置时是以字符串形式返回，要使用parseInt()函数提取数值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function moveCartoon()</span><br><span class="line">&#123;</span><br><span class="line">    var cartoon = document.getElementById(&quot;cartoon&quot;);</span><br><span class="line">    var xpos = parseInt(cartoon.style.left);</span><br><span class="line">    var ypos = parseInt(cartoon.style.top);</span><br><span class="line">    if (xpos == 200 &amp;&amp; ypos == 100) return true;</span><br><span class="line">    if (xpos &lt; 200) xpos++;</span><br><span class="line">    if (xpos &gt; 200) xpos--;</span><br><span class="line">    if (ypos &lt; 100) ypos++;</span><br><span class="line">    if (ypos &gt; 100) ypos--;</span><br><span class="line">    cartoon.style.left = xpos + &quot;px&quot;;</span><br><span class="line">    cartoon.style.top = ypos + &quot;px&quot;;</span><br><span class="line">    movement = setTimeout(&quot;moveCartoon()&quot;, 50);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h2><h3 id="创建moveElement函数"><a href="#创建moveElement函数" class="headerlink" title="创建moveElement函数"></a>创建moveElement函数</h3><p>与之前的函数不同的是，moveElement函数可以输入参数</p>
<ul>
<li>打算移动的元素id</li>
<li>该元素的目的地</li>
<li>两次移动的间隔时间</li>
</ul>
<p>定义一个moveElement函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function moveElemeng(elementID, finalX, finalY, interval)</span><br><span class="line">&#123;</span><br><span class="line">    var elem = document.getElementById(elementID);</span><br><span class="line">    var xpos = parseInt(elem.style.left);</span><br><span class="line">    var ypos = parseInt(elem.style.top);</span><br><span class="line">    if (xpos == finalX &amp;&amp; ypos == finalY) return true;</span><br><span class="line">    if (xpos &lt; finalX) xpos++;</span><br><span class="line">    if (xpos &gt; finalX) xpos--;</span><br><span class="line">    if (ypos &lt; finalY) ypos++;</span><br><span class="line">    if (ypos &gt; finalY) ypos--;</span><br><span class="line">    elem.style.left = xpos + &quot;px&quot;;</span><br><span class="line">    elem.style.top = ypos + &quot;px&quot;;</span><br><span class="line">    repeat = &quot;moveElemeng(&quot;+&quot;&apos;&quot;+elementID+&quot;&apos;&quot;+&quot;,&quot;+finalX+&quot;,&quot;+finalY+&quot;,&quot;+interval+&quot;)&quot;;</span><br><span class="line">    moment = setTimeout(repeat, interval)    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">addLoadEvent(</span><br><span class="line">    function positionCartoon()</span><br><span class="line">    &#123;</span><br><span class="line">        var cartoon = document.getElementById(&quot;cartoon&quot;);</span><br><span class="line">        cartoon.style.position = &quot;absolute&quot;;</span><br><span class="line">        cartoon.style.left = &quot;50px&quot;;</span><br><span class="line">        cartoon.style.top = &quot;100px&quot;;</span><br><span class="line">        moveElemeng(&quot;cartoon&quot;,200,100,10)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(function()</span><br><span class="line">    &#123;</span><br><span class="line">        var logop = document.getElementById(&quot;logop&quot;);</span><br><span class="line">        logop.style.left = &quot;200px&quot;;</span><br><span class="line">        logop.style.top = &quot;0px&quot;;</span><br><span class="line">        moveElemeng(&quot;logop&quot;,200,30,5);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">function moveElemeng(elementID, finalX, finalY, interval)</span><br><span class="line">&#123;</span><br><span class="line">    var elem = document.getElementById(elementID);</span><br><span class="line">    var xpos = parseInt(elem.style.left);</span><br><span class="line">    var ypos = parseInt(elem.style.top);</span><br><span class="line">    if (xpos == finalX &amp;&amp; ypos == finalY) return true;</span><br><span class="line">    if (xpos &lt; finalX) xpos++;</span><br><span class="line">    if (xpos &gt; finalX) xpos--;</span><br><span class="line">    if (ypos &lt; finalY) ypos++;</span><br><span class="line">    if (ypos &gt; finalY) ypos--;</span><br><span class="line">    elem.style.left = xpos + &quot;px&quot;;</span><br><span class="line">    elem.style.top = ypos + &quot;px&quot;;</span><br><span class="line">    repeat = &quot;moveElemeng(&quot;+&quot;&apos;&quot;+elementID+&quot;&apos;&quot;+&quot;,&quot;+finalX+&quot;,&quot;+finalY+&quot;,&quot;+interval+&quot;)&quot;;</span><br><span class="line">    moment = setTimeout(repeat, interval)    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h1><p>HTML5添加了新的标记元素</p>
<h2 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a>Canvas</h2><p>通过canvas元素标签可以实现与静态图片的交互，创建一个画布</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id=&quot;draw-in-me&quot; width=&quot;120&quot; height=&quot;40&quot;&gt;</span><br><span class="line">&lt;/canvas&gt;</span><br></pre></td></tr></table></figure>

<p>然后使用JavaScript作画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">addLoadEvent( </span><br><span class="line">    function draw()</span><br><span class="line">    &#123;</span><br><span class="line">        var canvas = document.getElementById(&quot;draw-in-me&quot;);</span><br><span class="line">        if (canvas.getContext)</span><br><span class="line">        &#123;</span><br><span class="line">            var cxt=canvas.getContext(&quot;2d&quot;);</span><br><span class="line">            cxt.moveTo(10,10);</span><br><span class="line">            cxt.lineTo(150,50);</span><br><span class="line">            cxt.lineTo(10,50);</span><br><span class="line">            cxt.stroke();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="音频和视频"><a href="#音频和视频" class="headerlink" title="音频和视频"></a>音频和视频</h2><p>HTML5的video元素为在文档中嵌入影片以及与影片的交互提供了一种标准方式，同时也把操作简化成一个标签</p>
<p>video 元素为在文档中嵌入影片以及与影片交互定义了一种标准方式，同时也简化成一个标签<br>这里嵌入了一个mp4视频，同时给出了浏览器不支持video时的下载链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;video src=&quot;./static/mv/badapple.mp4&quot;&gt;</span><br><span class="line">    &lt;!-- 不支持时替换内容 --&gt;</span><br><span class="line">    &lt;a href=&quot;./static/mv/badapple.mp4&quot;&gt;Download movie.mp4&lt;/a&gt;</span><br><span class="line">&lt;/video&gt;</span><br></pre></td></tr></table></figure>

<p>audio元素用法也差不多</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio src=&quot;./static/mv/badapple.mp3&quot;&gt;</span><br><span class="line">    &lt;!-- 不支持时替换内容 --&gt;</span><br><span class="line">    &lt;a href=&quot;./static/mv/badapple.mp3&quot;&gt;&lt;/a&gt;</span><br><span class="line">&lt;/audio&gt;</span><br></pre></td></tr></table></figure>

<p>为保证每个人都能看到视频，必须作多种格式的视频并在video元素中包含多个来源</p>
<p>为了确保HTML5的兼容性，至少包含下列三个版本</p>
<ul>
<li>基于H.264和ACC的MP4</li>
<li>WebM (VP8 + Vorbis)</li>
<li>基于Theora视频和Vorbis音频的Ogg文件</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这本书就读到这边了，总的来说是本通俗易懂的书，对js的DOM编程有了一定的概念，也稍微了解了下HTML5，那么，继续学习吧！</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-04-30</span><i class="fa fa-tag"></i><a class="tag" href="/tags/javascript/" title="javascript">javascript </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/2016/04/30/Note/javascript/javascript-09/,Harryx,javascript-09 动画,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2016/05/01/Note/javascript/jQuery/jQuery-01/" title="jQuery-01 简述">Post Anterior</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2016/04/30/Note/javascript/javascript-08/" title="javascript-08 style属性">Próximo post</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>